name = "rabbit-holes"
main = "./dist/_worker.js"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

# Static assets configuration for Astro hybrid mode
[assets]
binding = "ASSETS"
directory = "./dist"

# Environment variables
[vars]
ENVIRONMENT = "production"

# KV bindings for sessions (required by Astro)
[[kv_namespaces]]
binding = "SESSION"
preview_id = "304199e526484a1cba1cec53965a0868"
id = "3d8150ca8a8f47bbb4abd3a6330457fd"

# Build configuration
[build]
command = "npm run build"

# Development configuration  
[dev]
port = 8787

# Define multiple environments
[env.staging]
name = "rabbit-holes-staging"

[env.production]
name = "rabbit-holes"
routes = [
  { pattern = "bhuvan.dev/*", zone_name = "bhuvan.dev" },
  { pattern = "www.bhuvan.dev/*", zone_name = "bhuvan.dev" }
]