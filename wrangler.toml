name = "rabbit-holes"
main = "./dist/_worker.js"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

# Static assets configuration for Astro
[assets]
binding = "ASSETS"
directory = "./dist"

# Workers AI binding (free tier, no API key needed)
[ai]
binding = "AI"

# Environment variables (set via wrangler secret put)
[vars]
ENVIRONMENT = "production"
GITHUB_REPO = "bebhuvan/rabbit-holes"

# Build configuration
[build]
command = "npm run build"

# Production routes
routes = [
  { pattern = "rabbitholes.garden/*", zone_name = "rabbitholes.garden" },
  { pattern = "www.rabbitholes.garden/*", zone_name = "rabbitholes.garden" }
]

# Development configuration  
[dev]
port = 8787