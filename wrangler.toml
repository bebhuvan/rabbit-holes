name = "rabbit-holes"
main = "./dist/_worker.js"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

# Static assets configuration for Astro
[assets]
binding = "ASSETS"
directory = "./dist"

# Environment variables (set via wrangler secret put)
[vars]
ENVIRONMENT = "production"

# Build configuration
[build]
command = "npm run build"

# Development configuration  
[dev]
port = 8787

# Define environments
[env.staging]
name = "rabbit-holes-staging"

[env.production]
name = "rabbit-holes"
routes = [
  { pattern = "bhuvan.dev/*", zone_name = "bhuvan.dev" },
  { pattern = "www.bhuvan.dev/*", zone_name = "bhuvan.dev" }
]